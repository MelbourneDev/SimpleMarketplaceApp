@model DashboardViewModel
<h2> admin dashboard </h2>
<ul class="nav nav-tabs">
    <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="tab" href="#pending">Pending Items</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#approved">Approved Items</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#rejected">Rejected Items</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-bs-toggle="tab" href="#sold">Sold Items</a>
    </li>
</ul>

<div class="tab-content">
    <div id="pending" class="container tab-pane active">
        <table class="table">
            <thead>
                <tr>
                    <th>User</th>
                    <th>Title</th>
                    <th>Description</th>
                    <th>Category ID</th>
                    <th>Price</th>
                    <th>Date Listed</th>
                    <th>Actions</th>
                </tr>
            </thead>
        @foreach (var item in Model.PendingItems)
        {
                <tr>
                    <td>@item.UserId</td>
                    <td>@item.Title</td>                    
                    <td>@item.Description</td>
                    <td>@item.CategoryId</td>
                    <td>@item.ItemPrice</td>
                    <td>@item.DateListed</td>
                    <td>
                        <a asp-controller="Admin" asp-action="ApproveItem" asp-route-itemId="@item.itemId" asp-route-activeTab="pending">Approve</a>
                        <a asp-controller="Admin" asp-action="RejectItem" asp-route-itemId="@item.itemId" asp-route-activeTab="pending">Reject</a>
                    </td>
                </tr>
        }
        </table>
    </div>
    <div id="approved" class="container tab-pane fade">
        <table class="table">
            <thead>
                <tr>
                    <th>User</th>
                    <th>Title</th>
                    <th>Description</th>
                    <th>Category ID</th>
                    <th>Price</th>
                    <th>Date Listed</th>
                    <th>Actions</th>
                </tr>
            </thead>
        @foreach (var item in Model.ApprovedItems)
        {
                <tr>
                    <td>@item.UserId</td>
                    <td>@item.Title</td>
                    <td>@item.Description</td>
                    <td>@item.CategoryId</td>
                    <td>@item.ItemPrice</td>
                    <td>@item.DateListed</td>
                    <td>
                        <a asp-controller="Admin" asp-action="PullItem" asp-route-itemId="@item.itemId" asp-route-activeTab="approved">Pull Item</a>
                        <a asp-controller="Admin" asp-action="RejectItem" asp-route-itemId="@item.itemId" asp-route-activeTab="approved">Reject</a>
                    </td>
                </tr>
        }
        </table>
    </div>

    <div id="rejected" class="container tab-pane fade">
        <table class="table">
            <thead>
                <tr>
                    <th>User</th>
                    <th>Title</th>
                    <th>Description</th>
                    <th>Category ID</th>
                    <th>Price</th>
                    <th>Date Listed</th>
                    <th>Actions</th>
                </tr>
            </thead>
        @foreach (var item in Model.RejectedItems)
        {
                <tr>
                    <td>@item.UserId</td>
                    <td>@item.Title</td>
                    <td>@item.Description</td>
                    <td>@item.CategoryId</td>
                    <td>@item.ItemPrice</td>
                    <td>@item.DateListed</td>
                    <td>
                        <a asp-controller="Admin" asp-action="PullItem" asp-route-itemId="@item.itemId" asp-route-activeTab="rejected">Pull Item</a>
                        <a asp-controller="Admin" asp-action="ReinstateItem" asp-route-itemId="@item.itemId" asp-route-activeTab="rejected">Reinstate item</a>
                    </td>
                </tr>
        }
        </table>
    </div>

    <div id="sold" class="container tab-pane fade">
        <table class="table">
            <thead>
                <tr>
                    <th>User</th>
                    <th>Title</th>
                    <th>Description</th>
                    <th>Category ID</th>
                    <th>Price</th>
                    <th>Date Listed</th>
                    <th>Actions</th>
                </tr>
            </thead>
            @foreach (var item in Model.SoldItems)
            {
                <tr>
                    <td>@item.UserId</td>
                    <td>@item.Title</td>
                    <td>@item.Description</td>
                    <td>@item.CategoryId</td>
                    <td>@item.ItemPrice</td>
                    <td>@item.DateListed</td>
                    <td>
                        
                        <a asp-controller="Admin" asp-action="ReinstateItemFromSold" asp-route-itemId="@item.itemId" asp-route-activeTab="sold">Reinstate item</a>
                    </td>
                </tr>
            }
        </table>
    </div>

</div>



<script>
    window.onload = function () {
        var activeTab = '@TempData["ActiveTab"]';
        if (!activeTab) {
            activeTab = 'pending';
        }
        openTab(activeTab);
    };

    function openTab(tabName) {
        // Logic to activate the tab with the name in tabName
        // For example, using Bootstrap's tab('show') method
        $('.nav-tabs a[href="#' + tabName + '"]').tab('show');
    }
</script>
